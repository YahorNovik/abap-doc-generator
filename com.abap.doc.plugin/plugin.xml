<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

    <!-- Command definition -->
    <extension point="org.eclipse.ui.commands">
        <category
            id="com.abap.doc.commands.category"
            name="ABAP Documentation">
        </category>
        <command
            id="com.abap.doc.command.buildDag"
            name="Build Dependency Graph"
            categoryId="com.abap.doc.commands.category">
        </command>
        <command
            id="com.abap.doc.command.generateDoc"
            name="Generate ABAP Documentation"
            categoryId="com.abap.doc.commands.category">
        </command>
        <command
            id="com.abap.doc.command.generatePackageDoc"
            name="Generate Package Documentation"
            categoryId="com.abap.doc.commands.category">
        </command>
        <command
            id="com.abap.doc.command.saveDoc"
            name="Save Documentation"
            categoryId="com.abap.doc.commands.category">
        </command>
        <command
            id="com.abap.doc.command.openChat"
            name="Open ABAP Doc Chat"
            categoryId="com.abap.doc.commands.category">
        </command>
    </extension>

    <!-- Chat View -->
    <extension point="org.eclipse.ui.views">
        <category
            id="com.abap.doc.views.category"
            name="ABAP Documentation">
        </category>
        <view
            id="com.abap.doc.chat.chatView"
            name="ABAP Doc Chat"
            class="com.abap.doc.plugin.chat.ChatView"
            category="com.abap.doc.views.category"
            allowMultiple="false">
        </view>
    </extension>

    <!-- Menu contributions: context menu + main menu -->
    <extension point="org.eclipse.ui.menus">
        <!-- Context menu (right-click) -->
        <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
            <command
                commandId="com.abap.doc.command.generateDoc"
                label="Generate ABAP Documentation"
                style="push">
            </command>
            <command
                commandId="com.abap.doc.command.generatePackageDoc"
                label="Generate Package Documentation"
                style="push">
            </command>
            <command
                commandId="com.abap.doc.command.buildDag"
                label="Build Dependency Graph"
                style="push">
            </command>
        </menuContribution>
        <!-- Main menu bar -->
        <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
            <menu
                id="com.abap.doc.menu"
                label="ABAP Doc">
                <command
                    commandId="com.abap.doc.command.generateDoc"
                    label="Generate Documentation for Current Editor"
                    style="push">
                </command>
                <command
                    commandId="com.abap.doc.command.generatePackageDoc"
                    label="Generate Package Documentation"
                    style="push">
                </command>
                <command
                    commandId="com.abap.doc.command.buildDag"
                    label="Build Dependency Graph"
                    style="push">
                </command>
                <separator name="com.abap.doc.menu.separator1" visible="true"/>
                <command
                    commandId="com.abap.doc.command.saveDoc"
                    label="Save Documentation"
                    style="push">
                </command>
                <command
                    commandId="com.abap.doc.command.openChat"
                    label="Open Chat"
                    style="push">
                </command>
            </menu>
        </menuContribution>
    </extension>

    <!-- Handlers -->
    <extension point="org.eclipse.ui.handlers">
        <handler
            class="com.abap.doc.plugin.handler.BuildDagHandler"
            commandId="com.abap.doc.command.buildDag">
        </handler>
        <handler
            class="com.abap.doc.plugin.handler.GenerateDocHandler"
            commandId="com.abap.doc.command.generateDoc">
        </handler>
        <handler
            class="com.abap.doc.plugin.handler.GeneratePackageDocHandler"
            commandId="com.abap.doc.command.generatePackageDoc">
        </handler>
        <handler
            class="com.abap.doc.plugin.handler.SaveDocHandler"
            commandId="com.abap.doc.command.saveDoc">
        </handler>
        <handler
            class="com.abap.doc.plugin.chat.OpenChatHandler"
            commandId="com.abap.doc.command.openChat">
        </handler>
    </extension>

    <!-- Keybindings -->
    <extension point="org.eclipse.ui.bindings">
        <!-- Ctrl+Shift+D: Generate Documentation -->
        <key
            commandId="com.abap.doc.command.generateDoc"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+D">
        </key>
        <!-- Ctrl+Shift+G: Build Dependency Graph -->
        <key
            commandId="com.abap.doc.command.buildDag"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+G">
        </key>
        <!-- Ctrl+Shift+P: Generate Package Documentation -->
        <key
            commandId="com.abap.doc.command.generatePackageDoc"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+P">
        </key>
        <!-- Ctrl+Shift+S: Save Documentation -->
        <key
            commandId="com.abap.doc.command.saveDoc"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+S">
        </key>
        <!-- Ctrl+Shift+C: Open Chat -->
        <key
            commandId="com.abap.doc.command.openChat"
            schemeId="org.eclipse.ui.defaultAcceleratorConfiguration"
            sequence="M1+M2+C">
        </key>
    </extension>

    <!-- Preferences page -->
    <extension point="org.eclipse.ui.preferencePages">
        <page
            id="com.abap.doc.preferences.connection"
            class="com.abap.doc.plugin.preferences.ConnectionPreferencePage"
            name="ABAP Doc Generator">
        </page>
    </extension>

    <!-- Preference defaults -->
    <extension point="org.eclipse.core.runtime.preferences">
        <initializer class="com.abap.doc.plugin.preferences.PreferenceInitializer"/>
    </extension>

</plugin>
